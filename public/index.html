<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ProteOS - Shape-shifting AI Platform</title>
    <link rel="stylesheet" href="styles.css?v=4">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <!-- Desktop Background -->
    <div class="desktop">
        <!-- Desktop Icons -->
        <div class="desktop-icons">
            <div class="desktop-icon" id="claude-icon" title="Launch Claude Code Terminal" data-container-type="claude">
                <div class="icon-image"><img src="images/icons/apps/Claude.svg" alt="Claude" class="custom-icon" onerror="this.src='images/icons/apps/Claude.png'"></div>
                <div class="icon-label">Claude Code</div>
            </div>
            <div class="desktop-icon" id="gemini-icon" title="Launch Gemini CLI Terminal" data-container-type="gemini">
                <div class="icon-image"><img src="images/icons/apps/Gemini.svg" alt="Gemini" class="custom-icon" onerror="this.src='images/icons/apps/Gemini.png'"></div>
                <div class="icon-label">Gemini CLI</div>
            </div>
            <div class="desktop-icon" id="openai-icon" title="Launch OpenAI Codex CLI Terminal" data-container-type="openai">
                <div class="icon-image"><img src="images/icons/apps/OpenAI.svg" alt="OpenAI" class="custom-icon" onerror="this.src='images/icons/apps/OpenAI.png'"></div>
                <div class="icon-label">OpenAI Codex</div>
            </div>
            <div class="desktop-icon" id="files-icon" title="Browse Container Files">
                <div class="icon-image"><img src="images/icons/folders/Folder-Full.svg" alt="Files" class="custom-icon" onerror="this.src='images/icons/folders/Folder-Full.png'"></div>
                <div class="icon-label">Files</div>
            </div>
            <div class="desktop-icon" id="logs-icon" title="View System Logs">
                <div class="icon-image"><img src="images/icons/apps/Logs.svg" alt="Logs" class="custom-icon" onerror="this.src='images/icons/apps/Logs.png'"></div>
                <div class="icon-label">System Logs</div>
            </div>
            <div class="desktop-icon" id="about-icon" title="About ProteOS">
                <div class="icon-image"><img src="images/icons/apps/About.svg" alt="About" class="custom-icon" onerror="this.src='images/icons/apps/About.png'"></div>
                <div class="icon-label">About</div>
            </div>
        </div>

        <!-- Top Navigation Bar -->
        <div class="taskbar">
            <div class="taskbar-left">
                <div class="start-button">
                    <i data-lucide="waves" class="whale-logo"></i>
                    <span>ProteOS</span>
                </div>
                <div class="menu-items">
                    <div class="menu-item" id="settings-menu">
                        <span>Settings</span>
                    </div>
                    <div class="menu-item" id="folders-menu">
                        <span>Folders</span>
                    </div>
                    <div class="menu-item" id="help-menu">
                        <span>Help</span>
                    </div>
                    <div class="menu-item" id="bugs-menu">
                        <span>Submit Bugs</span>
                    </div>
                </div>
            </div>
            <div class="taskbar-right">
                <div class="system-tray">
                    <span class="tray-item url-badge">
                        <i data-lucide="globe" class="icon"></i>
                        <span id="url-display">http://localhost:3001</span>
                    </span>
                    <span class="tray-item" id="clock">Tue Aug 31 11:40</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Window Container -->
    <div id="windows-container"></div>

    <!-- Minimized Sessions Bar -->
    <div id="minimized-bar" class="minimized-bar"></div>

    <!-- Active Sessions Widget -->
    <div id="sessions-widget" class="sessions-widget">
        <div class="sessions-widget-header">
            <i data-lucide="layers" class="sessions-icon"></i>
            <span>Active Sessions</span>
            <span class="sessions-count" id="sessions-count">0</span>
        </div>
        <div class="sessions-list" id="sessions-list">
            <div class="sessions-empty">No active sessions</div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="about-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>About ProteOS</h2>
                <button class="modal-close" data-modal="about">&times;</button>
            </div>
            <div class="modal-body">
                <div class="about-logo"><i data-lucide="waves" style="width: 64px; height: 64px;"></i></div>
                <h3>ProteOS (P/OS) v1.0</h3>
                <p><em>"Shape-shifting intelligence from the depths of containerization"</em></p>
                <p>ProteOS — derived from <strong>Proteus (Πρωτεύς)</strong>, the Greek sea god of shape-shifting, wisdom, and prophecy.</p>
                <p><strong>Features:</strong></p>
                <ul>
                    <li>Multi-AI provider support (Claude, Gemini, OpenAI)</li>
                    <li>Shape-shifting between AI platforms seamlessly</li>
                    <li>Web-based terminal access</li>
                    <li>Window management system</li>
                    <li>Docker container lifecycle management</li>
                    <li>Persistent file storage</li>
                </ul>
                <p class="about-footer">Built with Docker, Node.js, and ttyd</p>
            </div>
        </div>
    </div>

    <!-- File Browser Modal -->
    <div class="modal" id="files-modal">
        <div class="modal-content file-browser-modal">
            <div class="modal-header">
                <h2><i data-lucide="folder" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 8px;"></i>Container Files</h2>
                <button class="modal-close" data-modal="files">&times;</button>
            </div>
            <div class="modal-body">
                <div class="container-selector">
                    <label>Select Container:</label>
                    <select id="file-browser-container-select"></select>
                </div>
                <div class="file-browser">
                    <div class="file-path">
                        <button class="path-back-btn" title="Go back"><i data-lucide="arrow-left" style="width: 16px; height: 16px;"></i></button>
                        <span id="current-path">/</span>
                    </div>
                    <div class="file-list" id="file-list">
                        <div class="loading">Loading files...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- File Viewer Modal -->
    <div class="modal" id="file-viewer-modal">
        <div class="modal-content file-viewer-modal">
            <div class="modal-header">
                <h2 id="file-viewer-title"><i data-lucide="file-text" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 8px;"></i>File Viewer</h2>
                <button class="modal-close" data-modal="file-viewer">&times;</button>
            </div>
            <div class="modal-body">
                <pre id="file-content"></pre>
            </div>
        </div>
    </div>

    <!-- System Logs Modal -->
    <div class="modal" id="logs-modal">
        <div class="modal-content logs-modal">
            <div class="modal-header">
                <h2>
                    <i data-lucide="terminal" style="width: 18px; height: 18px; display: inline-block; vertical-align: middle; margin-right: 8px;"></i>
                    ProteOS System Logs
                </h2>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <button class="log-control-btn" id="clear-logs-btn" title="Clear logs">
                        <i data-lucide="trash-2"></i>
                    </button>
                    <button class="log-control-btn" id="auto-scroll-btn" title="Auto-scroll" data-active="true">
                        <i data-lucide="arrow-down"></i>
                    </button>
                    <button class="modal-close" data-modal="logs">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="log-filters">
                    <button class="log-filter-btn active" data-level="all">All</button>
                    <button class="log-filter-btn" data-level="info">Info</button>
                    <button class="log-filter-btn" data-level="success">Success</button>
                    <button class="log-filter-btn" data-level="warning">Warning</button>
                    <button class="log-filter-btn" data-level="error">Error</button>
                </div>
                <div class="log-viewer" id="log-viewer">
                    <div class="log-entry log-info">
                        <span class="log-time">--:--:--</span>
                        <span class="log-level">INFO</span>
                        <span class="log-message">ProteOS System Logs initialized</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>
                    <i data-lucide="settings"></i>
                    Settings
                </h2>
                <button class="modal-close" data-modal="settings">&times;</button>
            </div>
            <div class="modal-body settings-body">
                <div class="settings-sidebar">
                    <div class="settings-menu-item active" data-section="theme">
                        <i data-lucide="palette"></i>
                        <span>Theme</span>
                    </div>
                    <div class="settings-menu-item" data-section="folders">
                        <i data-lucide="folder"></i>
                        <span>Folders</span>
                    </div>
                    <div class="settings-menu-item" data-section="api-keys">
                        <i data-lucide="key"></i>
                        <span>API Keys</span>
                    </div>
                </div>
                <div class="settings-content">
                    <!-- Theme Section -->
                    <div class="settings-section active" id="theme-section">
                        <h3>Theme Settings</h3>
                        <div class="setting-group">
                            <label>Appearance</label>
                            <select id="theme-selector" class="settings-select">
                                <option value="dark">Dark Mode</option>
                                <option value="light">Light Mode</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>Wallpapers</label>
                            <div class="wallpaper-grid" id="wallpaper-grid">
                                <div class="loading">Loading wallpapers...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Folders Section -->
                    <div class="settings-section" id="folders-section">
                        <h3>Workspace Folders</h3>
                        <div class="folders-list" id="folders-list">
                            <div class="loading">Loading folders...</div>
                        </div>
                    </div>

                    <!-- API Keys Section -->
                    <div class="settings-section" id="api-keys-section">
                        <h3>API Keys</h3>
                        <div class="setting-group">
                            <label for="anthropic-key">
                                <img src="images/icons/apps/Claude.svg" class="api-key-icon" alt="Claude">
                                Anthropic (Claude)
                            </label>
                            <input type="password" id="anthropic-key" class="settings-input" placeholder="sk-ant-...">
                            <small>Get your API key from <a href="https://console.anthropic.com" target="_blank">console.anthropic.com</a></small>
                        </div>
                        <div class="setting-group">
                            <label for="gemini-key">
                                <img src="images/icons/apps/Gemini.svg" class="api-key-icon" alt="Gemini">
                                Google Gemini
                            </label>
                            <input type="password" id="gemini-key" class="settings-input" placeholder="AIza...">
                            <small>Get your API key from <a href="https://aistudio.google.com/apikey" target="_blank">aistudio.google.com</a></small>
                        </div>
                        <div class="setting-group">
                            <label for="openai-key">
                                <img src="images/icons/apps/OpenAI.svg" class="api-key-icon" alt="OpenAI">
                                OpenAI
                            </label>
                            <input type="password" id="openai-key" class="settings-input" placeholder="sk-...">
                            <small>Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a></small>
                        </div>
                        <button class="settings-save-btn" id="save-api-keys-btn">Save API Keys</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js?v=4"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>
